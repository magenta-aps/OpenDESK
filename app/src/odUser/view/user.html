<section class="od-user" ng-controller="UserController as vm">
    <div ng-controller="AuthController as ac">
        <div class="od-user-header-menu">
            <h2 class="od-user-name" ng-class="ac.getUserInfo().user.capabilities.isAdmin ? 'od-user-admin' : ''">{{ ac.getUserInfo().user.firstName }} {{ ac.getUserInfo().user.lastName }}</h2>
            <button ng-click="vm.toggleUser()" class="od-btn od-user--toggle">
                <md-icon>person</md-icon>
             </button>
        </div>

        <div class="od-flyout right fixed" ng-class="{ open: vm.on, closed: !vm.on }" ng-click="vm.toggleUser()">
            <div class="od-flyout--body" ng-click="$event.stopPropagation()">
                <h2 class="od-flyout--title md-headline">{{'USER.USER' | translate}}</h2>
                <button ng-click="vm.toggleUser()" class="od-btn od-flyout--close">
                    <md-icon>keyboard_arrow_right</md-icon>
                </button>

                <div class="od-me">
                    <label for="uploadBtn">
                        <div class="container" layout="column" layout-align="center center">
                            <img src="{{ vm.avatar }}" class="od-avatar" alt="{{ ac.getUserInfo().user.firstName }} {{ ac.getUserInfo().user.lastName }}">
                              <div class="middle">
                                <i class="material-icons text">edit</i>
                             </div>
                        </div>
                     </label>
                     <input type="file" id="uploadBtn" class="upload" file-model="file" ng-model="avatar" onchange="angular.element(this).scope().uploadAvatar(this)"/>
                    <div layout="column" layout-align="center center">
                        <h2 class="md-headline">{{ ac.getUserInfo().user.firstName }} {{ ac.getUserInfo().user.lastName }}</h2>
                    </div>
                    <md-subheader>{{'USER.USERINFO' | translate}}</md-subheader>
                    <md-list>
                        <md-list-item>
                            <div class="md-list-item-text">
                                {{'USER.USERNAME' | translate}}:
                            </div>
                            <div class="md-secondary">
                                {{ ac.getUserInfo().user.userName }}
                            </div>
                        </md-list-item>
                        <md-list-item>
                            <div class="md-list-item-text">
                                Email:
                            </div>
                            <div class="md-secondary">
                                {{ ac.getUserInfo().user.email }}
                            </div>
                        </md-list-item>
                        <md-list-item>
                            <div class="md-list-item-text">
                                {{'CONTACT.PHONE' | translate}}:
                            </div>
                            <div class="md-secondary">
                                {{ ac.getUserInfo().user.telephone }}
                            </div>
                        </md-list-item>
                    </md-list>

                    <div ng-controller="NotificationsSettingsController as nsc">
                        <md-subheader>{{'NOTIFICATION.NOTIFICATIONS' | translate}}</md-subheader>
                        <md-list>
                            <md-list-item>
                                <p>{{'COMMON.SEND' | translate}} {{'NOTIFICATION.NOTIFICATIONS' | translate | lowercase}}</p>
                                <md-input-container>
                                    <md-switch class="md-secondary" aria-label="Notifikationer" ng-true-value="'true'" ng-false-value="'false'" ng-model="nsc.receiveNotifications"
                                        ng-change='nsc.setNotificationPreferences()'></md-switch>
                                </md-input-container>
                            </md-list-item>
                        </md-list>
                    </div>

                    <button class="od-btn" id='logout' ng-click="ac.logout()">
                    {{ 'MENU.LOGOUT' | translate }}
                </button>
                </div>

            </div>
        </div>
    </div>
</section>